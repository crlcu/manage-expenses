var Login=(function(){function a(){var e=typeof window.screenX!="undefined"?window.screenX:window.screenLeft,c=typeof window.screenY!="undefined"?window.screenY:window.screenTop,i=typeof window.outerWidth!="undefined"?window.outerWidth:document.body.clientWidth,f=typeof window.outerHeight!="undefined"?window.outerHeight:(document.body.clientHeight-22),d=500,b=500,h=parseInt(e+((i-d)/2),10),g=parseInt(c+((f-b)/2.5),10);this.features=("width="+d+",height="+b+",left="+h+",top="+g+",scrollbars=yes")}a.prototype.facebook=function(b){var c=window.open(b,"",this.features);if(window.focus){c.focus()}return false};return a})();var Table=(function(){function a(b){var c=this;var d={table:$(""),editTemplate:""};this.options=$.extend(d,b);b.table.on("dblclick","tr.edit td",function(f){c.edit($(this).parent("tr"))})}a.prototype.template=function(b){return _.template(this.options.editTemplate,b)};a.prototype.edit=function(b){b.hide();var c=$(this.template({description:"descr",setting:"set",value:"val",plugin:"plugin",controller:"ctrl",action:"act"}));b.after(c);c.on("click",".cancel",function(){c.remove();b.show()});c.on("click",".save",function(){console.log($(this).parent().parent().find("input"));return false})};return a})();var Search=(function(){function a(){}a.prototype.submit=function(b){var c=b.attr("action");var d=$.ajax({url:c,type:"post",data:b.toJSON()});d.done(function(e){b.replaceWith(e)});return false};return a})();var Settings=(function(){function a(b){var c={table:$(""),editTemplate:""};b=$.extend(c,b);this.editTemplate=b.editTemplate;this.table=new Table(b)}return a})();var Menu=(function(){function a(b){this.$menu=b;this.__menu(".first.level");this.__menu(".second.level");this.__menu(".third.level")}a.prototype.__menu=function(c){var b=this.$menu.find(c).children();b.on("click","> a i",function(){$(this).toggleClass("icon-sort-down").toggleClass("icon-sort-up");var d=$(this).parent().siblings();if(d.length){d.slideToggle();return false}})};return a})();var Modal=(function(){function a(b){var c=this;this.$loader=$('<img src="http://manage-expenses.com/img/icons/loader-spinner.gif"/>')}a.prototype.open=function(e,f){this.$modal=this.modal(f);$("body").append(this.$modal);var b=this.$modal.children(".modal-body");var d="";var c=this.$modal.find("button.save");b.html(this.$loader);this.$modal.modal("show");b.load(e+" form",function(){d=b.find("form");d.off("keypress");d.on("keypress","input",function(g){if(g.which==13){c.trigger("click")}})});c.off("click");c.on("click",function(){var g=$.ajax({url:d.attr("action"),data:d.serialize(),type:"PUT"});g.done(function(h){d=$(h).children("form");b.html(d);d.off("keypress");d.on("keypress","input",function(i){if(i.which==13){c.trigger("click")}})})});return false};a.prototype.close=function(b){this.$modal.modal("hide").remove()};a.prototype.modal=function(c){var b="";var d="";if(c.modalClose){b='<button class="btn" data-dismiss="modal" aria-hidden="true" onclick="modal.close()"><%= modalClose %></button>'}if(c.modalSave){d='<button class="btn btn-primary save"><%= modalSave %></button>'}return $(_.template('<div class="modal hide fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="label"><%= modalHeader %></h3></div><div class="modal-body"></div><div class="modal-footer">'+b+d+"</div></div>",c))};return a})();var Permissions=(function(){function a(b){this.$permissions=b;this.$loader=$('<img src="http://manage-expenses.com/img/icons/loader-spinner.gif"/>');this.events()}a.prototype.events=function(){this.$permissions.on("click",".input.checkbox",function(f){var d=$(this);var b=d.closest("form");var c=$.ajax({url:b.attr("action"),data:b.serialize(),type:"POST",dataType:"json"});c.done(function(e){if(e.success===false){d.attr("checked",!d.attr("checked"))}})})};return a})();(function(a){a.fn.toJSON=function(){var c={};var b=this.serializeArray();a.each(b,function(){if(c[this.name]){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c}})(jQuery);